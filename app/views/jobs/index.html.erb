<%= render partial: "/groups/top", locals: { current_nav: "jobs" } %>

<div class="pull-right"><%= link_to "Create Job", new_group_job_path(@group), class: "btn btn-info" %></div>
<h2>Jobs</h2>
<br/>
<p>This is a list of jobs that are available for your class. You can add new jobs, edit existing jobs, see which students have which jobs and assign new jobs</p>
<br/>

<table class="table table-striped table-bordered">
  <thead>
    <th>Title</th>
    <th>Description</th>
    <th>Monthly Salary</th>
    <th>Students Assigned</th>
    <th></th>
    <th></th>
    <th></th>
  </thead>
  <tbody>
    <% if @group.jobs.count > 0 %>
      <% @group.jobs.each do |job| %>
        <tr>
          <td><%= link_to(job.title, group_job_path(@group, job)) %></td>
          <td><%= job.description %></td>
          <td><%= number_to_currency(job.salary) %></td>
          <td><%= job.job_assignments.each {|ja| ja.user.display_name }.join(", ") %></td>
          <td><%= link_to "Assign" %></td>
          <td><%= link_to 'Edit', edit_group_job_path(@group,job) %></td>
          <td><%= link_to 'Destroy', [@group,job], method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    <% else %>
      <tr>
        <td colspan="10">There are no jobs for this class.</td>
      </tr>
    <% end %>
  </tbody>
</table>