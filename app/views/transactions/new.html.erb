<script type="text/javascript">
  $(document).ready(function() {
    $('#transaction_occurred_on').datepicker({
        format: 'mm/dd/yyyy'
    });
  });
</script>


<div class="container container-half">
  <div class="page-header">
    <h1>Transfer Funds</h1>
  </div>
  <%= form_for [@group,@transaction] , html: { class: "#{@transaction.new_record? ? "new_transaction" : "edit_transaction"} form-horizontal" } do |f| %>

    <%= render partial: "/shared/errors", locals: { o: @transaction } %>

    <%= hidden_field_tag :from_account_id, params[:from_account_id] %>
    <%= hidden_field_tag :to_account_id, params[:to_account_id] %>

    <div class="field form-group input-group">
      <label for="transaction_amount">Transfer:</label>
      <div class="input-group">
        <span class="input-group-addon">$</span>
        <%= f.text_field :amount, class: "form-control" %>
      </div>
    </div>

    <div class="field form-group">
      <label for="transaction_to_account_id">To:</label>
      <div class="controls">
        <% if params[:to_account_id].present? %>
          <%= f.hidden_field :to_account_id %>
          <p class="form-control-static">
            <%= @to_account.display_name %>
          </p>
        <% else %>
          <%= f.select :to_account_id, accounts_for_select(@to_accounts), {}, class: "form-control" %>
        <% end %>
      </div>
    </div>

    <div class="field form-group">
      <label for="transaction_from_account_id">From:</label>
      <% if params[:from_account_id].present? %>
        <%= f.hidden_field :from_account_id %>
        <p class="form-control-static">
          <%= @from_account.display_name %>
        </p>
      <% else %>
        <%= f.select :from_account_id, accounts_for_select(@from_accounts) %>
      <% end %>
    </div>

    <div class="field form-group">
      <label for="transaction_from_account_id">Description:</label>
      <%= f.text_area :description, class: "form-control", rows: 3 %>
    </div>
    <div class="field form-group">
      <label for="transaction_from_account_id">Occurred On:</label>
      <%= f.text_field :occurred_on, value: I18n.l(@transaction.occurred_on, format: :date), class: "form-control" %>
    </div>
    <div class="field form-group pull-right">
      <%= f.submit "Submit", class: "btn btn-success" %>
      <%= link_to "Cancel", @group, class: "btn btn-danger" %>
    </div>
  <% end %>
