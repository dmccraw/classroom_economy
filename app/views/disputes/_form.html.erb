
<%= form_for([@group, @dispute]) do |f| %>

  <%= render partial: "/shared/errors", locals: { o: @dispute } %>

  <%= f.hidden_field :owner_id %>
  <%= f.hidden_field :owner_type %>
  <%= f.hidden_field :group_id %>
  <%= f.hidden_field :transaction_id %>

  <hr>
  <div class="field">
    <strong><%= label_tag :transaction, "Transaction", class: "bold" %></strong>
    <%= render partial: "/transactions/transactions", locals: { transactions: [@dispute.transaction] } %>
  </div>
  <div class="field">
    <b><%= f.label :reason, nil, class: "bold"  %></b>
    <% unless current_user.teacher? %>
      <%= f.text_area :reason, class: "input-xxlarge", rows: 5 %>
    <% else %>
      <p><%= @dispute.reason %></p>
    <% end %>
  </div>

  <% if current_user.student? %>
    <% if @dispute.result %>
      <div class="field">
        <b><%= f.label :result, nil, class: "bold"  %>
        <p><%= @dispute.display_result %></p>
      </div>
      <div class="field">
        <%= f.label :result_reason, nil, class: "bold"  %>
        <p><%= @dispute.result_reason %></p>
      </div>
    <% end %>
  <% else %>
    <hr>
    <div class="field">
      <b><%= f.label :result, nil, class: "bold"  %></b>
      <%= f.select :result, options_for_select([["Deny", Dispute::DENY], ["Approve", Dispute::APPROVE]]) %>
    </div>
    <div class="field">
      <%= f.label :result_reason, "Result Reason", class: "bold"  %>
      <%= f.text_area :result_reason, class: "input-xxlarge", rows: 5 %>
    </div>
  <% end %>
  <hr>
  <div class="actions">
    <%= f.submit class: "btn" %>
  </div>
<% end %>
